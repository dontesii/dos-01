# 1.Повторить все команды, которые разбирали на практике (установка nginx на ubuntu и centos)

root@Dedal:/home/jerson/gitHun/dom25$ ansible-playbook playinst.yml

PLAY [Install nginx for CentOS] ***************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************
ok: [centos]

TASK [ensure nginx is at the latest version] **************************************************************************************************************
ok: [centos]

TASK [nginx] **********************************************************************************************************************************************
ok: [centos]

TASK [start nginx] ****************************************************************************************************************************************
changed: [centos]

PLAY [Install nginx for ubuntu] ***************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************
ok: [ubuntu]

TASK [ensure nginx is at the latest version] **************************************************************************************************************
ok: [ubuntu]

TASK [start nginx] ****************************************************************************************************************************************
fatal: [ubuntu]: FAILED! => {"changed": false, "msg": "Service is in unknown state", "status": {}}

PLAY RECAP ************************************************************************************************************************************************
centos                     : ok=4    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
ubuntu                     : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   

Поругался на то что служба запущена уже.Зашел на уд.машину и проверил состояние службы.

# 2.Установить докер и docker-compose на машины с убунту и на centos
root@Dedal:/home/jerson/gitHun/dom25$ ansible-playbook playinstD2.yml
PLAY [Install Docker for ubuntu] **************************************************************************************************************************
TASK [Gathering Facts] ************************************************************************************************************************************
ok: [ubuntu]
TASK [Install aptitude using apt] *************************************************************************************************************************
ok: [ubuntu]
TASK [Install required system packages] *******************************************************************************************************************
ok: [ubuntu] => (item=apt-transport-https)
ok: [ubuntu] => (item=ca-certificates)
ok: [ubuntu] => (item=curl)
ok: [ubuntu] => (item=software-properties-common)
ok: [ubuntu] => (item=python3-pip)
ok: [ubuntu] => (item=virtualenv)
ok: [ubuntu] => (item=python3-setuptools)
TASK [Add Docker GPG apt Key] *****************************************************************************************************************************
ok: [ubuntu]
TASK [Add Docker Repository] ******************************************************************************************************************************
ok: [ubuntu]
TASK [Update apt and install docker-ce] *******************************************************************************************************************
ok: [ubuntu]
TASK [Install Docker Module for Python] *******************************************************************************************************************
ok: [ubuntu]
PLAY RECAP ************************************************************************************************************************************************
ubuntu                     : ok=7    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   

root@Dedal:/home/jerson/gitHun/dom25$ ansible-playbook playinstC3.yml

PLAY [Install Docker] *************************************************************************************************************************************

TASK [Install yum utils] **********************************************************************************************************************************
ok: [centos]

TASK [Install device-mapper-persistent-data] **************************************************************************************************************
ok: [centos]

TASK [Install lvm2] ***************************************************************************************************************************************
ok: [centos]

TASK [Add Docker repo] ************************************************************************************************************************************
ok: [centos]

TASK [Install Docker] *************************************************************************************************************************************
ok: [centos]

TASK [Start Docker service] *******************************************************************************************************************************
changed: [centos]

TASK [Add user artem to docker group] *********************************************************************************************************************
changed: [centos]

PLAY RECAP ************************************************************************************************************************************************
centos                     : ok=7    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   



# 3.Развернуть приложение voting-app, используя docker-compose через ansible
Установил
root@Dedal:/home/jerson/gitHun/dom25$ ansible-playbook playcom.yml

PLAY [docker-compose project] *****************************************************************************************************************************

TASK [Gathering Facts] ************************************************************************************************************************************
ok: [ubuntu]

TASK [Ansible os family] **********************************************************************************************************************************
ok: [ubuntu] => {
    "ansible_os_family": "Debian"
}

TASK [install git] ****************************************************************************************************************************************
skipping: [ubuntu]

TASK [install pip3] ***************************************************************************************************************************************
skipping: [ubuntu]

TASK [install git] ****************************************************************************************************************************************
ok: [ubuntu]

TASK [create folder] **************************************************************************************************************************************
changed: [ubuntu]

TASK [inst compose] ***************************************************************************************************************************************
changed: [ubuntu]

TASK [git clone] ******************************************************************************************************************************************
changed: [ubuntu]

PLAY RECAP ************************************************************************************************************************************************
ubuntu                     : ok=6    changed=3    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   